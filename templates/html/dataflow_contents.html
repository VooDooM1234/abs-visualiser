{{range .}}
<tr>
  <td>{{.DataflowID}}</td>
  <td>{{.DataflowName}}</td>
  <td>
<button
  class="btn btn-success"
  hx-post="/get-dashboard/"
  hx-vals='{"dataflowid": "{{.DataflowID}}"}'
  hx-target="#main-content"
  hx-swap="innerHTML"
>
  View Dashboard
</button>

<!--   hx-on="htmx:afterOnLoad: handleDashboardLoad('{{.DataflowID}}')" -->
<!-- <script>
function handleDashboardLoad(dataflowid) {
  const overlay = document.getElementById("loading-overlay");
  overlay.style.display = "flex";

  fetch("/refresh-dashboard/", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ dataflowid })
  })
  .then(res => res.json())
  .then(json => {
    if (json.status === "ok") {
      const iframe = document.querySelector("iframe");
      iframe.src = `/dashboard/?dataflowid=${dataflowid}`;
      iframe.onload = () => overlay.style.display = "none";
    } else {
      overlay.style.display = "none";
      alert("Dashboard refresh failed.");
    }
  });
}
</script> -->


  </td>
</tr>
{{end}}
